(()=>{"use strict";const e=e=>fetch(e).then((e=>{if(e.ok)return e.json();throw new Error(`${e.status} ${e.statusText}`)})).catch((e=>{throw e})),t=({sliderWrapperSelector:e,slidesSelector:t,slideActiveClass:r="slider-slide-active-flex",btnPrevSelector:l=".slider-arrow_left",btnNextSelector:s=".slider-arrow_right",sliderCounterSelector:o})=>{if(!e||!t)return;const i=document.querySelector(e);let n,c;o&&(n=i.querySelector(".slider-counter-content__current"),c=i.querySelector(".slider-counter-content__total"));const a=(e,t,r)=>{e[t].classList.remove(r)},d=(e,t,r)=>{e[t].classList.add(r)},p={slides:[],currentSlide:0,counterCurrent:"",counterTotal:"",enable:!0,slidesInit:function(e){this.slides=i.querySelectorAll(e),this.currentSlide=0,this.slides.forEach((e=>{e.classList.add("slider-slide")})),this.slides[0].classList.add(r),o&&(n.textContent=1,c.textContent=this.slides.length)},slideChange:function(e){e.preventDefault(),(e.target.closest(s)||e.target.closest(l))&&(a(p.slides,p.currentSlide,r),e.target.closest(s)?p.currentSlide++:e.target.closest(l)&&p.currentSlide--,p.currentSlide>=p.slides.length&&(p.currentSlide=0),p.currentSlide<0&&(p.currentSlide=p.slides.length-1),d(p.slides,p.currentSlide,r),o&&(n.textContent=p.currentSlide+1))},mobileToggle:function(e){document.documentElement.clientWidth<e&&!this.enable?this.init():document.documentElement.clientWidth>e&&this.enable&&this.disable()},mobile:function(e){window.addEventListener("resize",(()=>{this.mobileToggle(e)})),this.disable(),this.mobileToggle(e)},disable:function(){i.removeEventListener("click",this.slideChange),this.slides[this.currentSlide].classList.remove(r),this.slides.forEach((e=>{e.classList.remove("slider-slide")})),this.enable=!1},renderSlide:function(e){a(this.slides,this.currentSlide,r),this.currentSlide=+e,d(this.slides,this.currentSlide,r),o&&(n.textContent=p.currentSlide+1)},init:function(){this.slidesInit(t),i&&this.slides&&(i.addEventListener("click",this.slideChange),this.enable=!0)}};return i.querySelector(s).style.userSelect="none",i.querySelector(l).style.userSelect="none",p.init(),p},r=({sliderWrapperSelector:e,slidesSelector:t,slideActiveClass:r="slider-slide-active-flex",btnPrevSelector:l=".slider-arrow_left",btnNextSelector:s=".slider-arrow_right",sliderCounterSelector:o})=>{if(!e||!t)return;const i=document.querySelector(e);let n,c;o&&(n=i.querySelector(".slider-counter-content__current"),c=i.querySelector(".slider-counter-content__total"));const a=(e,t,r)=>{e[t].classList.remove(r)},d=(e,t,r)=>{e[t].classList.add(r)},p={slides:[],currentSlide:0,counterCurrent:"",counterTotal:"",enable:!0,numOfSlidesChange:3,slidesInit:function(e){this.slides=i.querySelectorAll(e),this.currentSlide=0,this.slides.forEach((e=>{e.classList.add("slider-slide")}));for(let e=0;e<p.numOfSlidesChange;e++)this.slides[e].classList.add(r);o&&(n.textContent=1,c.textContent=this.slides.length)},slideChange:function(e){if(e.preventDefault(),e.target.closest(s)||e.target.closest(l)){for(let e=0;e<p.numOfSlidesChange;e++)a(p.slides,p.currentSlide+e,r);e.target.closest(s)?p.currentSlide++:e.target.closest(l)&&p.currentSlide--,p.currentSlide+p.numOfSlidesChange>=p.slides.length?document.querySelector(s).style.display="none":p.currentSlide<1?document.querySelector(l).style.display="none":(document.querySelector(s).style.display="flex",document.querySelector(l).style.display="flex");for(let e=0;e<p.numOfSlidesChange;e++)d(p.slides,p.currentSlide+e,r);o&&(n.textContent=p.currentSlide+1)}},mobileToggle:function(e){document.documentElement.clientWidth<e&&!this.enable?this.init():document.documentElement.clientWidth>e&&this.enable&&this.disable()},mobile:function(e){window.addEventListener("resize",(()=>{this.mobileToggle(e)})),this.disable(),this.mobileToggle(e)},disable:function(){i.removeEventListener("click",this.slideChange),this.slides.forEach((e=>{e.classList.remove("slider-slide"),e.classList.remove(r)})),document.querySelector(s).style.display="none",document.querySelector(l).style.display="none",this.enable=!1},renderSlide:function(e){a(this.slides,this.currentSlide,r),this.currentSlide=+e,d(this.slides,this.currentSlide,r),o&&(n.textContent=p.currentSlide+1)},init:function(){this.slidesInit(t),i&&this.slides&&(i.addEventListener("click",this.slideChange),this.enable=!0,document.querySelector(s).style.display="flex")}};return i.querySelector(s).style.userSelect="none",i.querySelector(l).style.userSelect="none",p.init(),p};(()=>{const e=document.querySelector(".header-contacts__phone-number-accord"),t=document.querySelector(".header-contacts__arrow");t.addEventListener("click",(()=>{e.classList.toggle("show-number"),t.classList.toggle("rotate")}))})(),(()=>{const e=document.querySelector(".popup-menu");document.addEventListener("click",(t=>{(t.target.closest(".menu__icon")||t.target.classList.contains("close-menu")||t.target.closest(".popup-dialog-menu")&&"A"===t.target.tagName||e.classList.contains("popup-show")&&!t.target.closest(".popup-dialog-menu"))&&(t.preventDefault(),e.classList.toggle("popup-show"))}))})(),document.addEventListener("click",(e=>{(e.target.closest(".popup-menu-nav__item")&&e.target.closest(".popup-dialog-menu")||e.target.closest(".button-footer")&&"A"===e.target.tagName)&&(e.preventDefault(),(e=>{let t=document.querySelector(e).offsetTop,r=document.scrollingElement.scrollTop;(({timing:e,draw:t,duration:r})=>{let l=performance.now();requestAnimationFrame((function s(o){let i=(o-l)/r;i>1&&(i=1);let n=e(i);t(n),i<1&&requestAnimationFrame(s)}))})({duration:1e3,timing:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,draw(e){document.scrollingElement.scrollTop=r+e*(t-r)}})})(e.target.attributes.href.value))})),(()=>{const e=document.querySelectorAll(".popup"),t=(e,t)=>{e.preventDefault(),document.querySelector(t).classList.add("popup-show")};document.addEventListener("click",(r=>{(r.target.closest(".popup-dialog")||r.target.closest(".popup-dialog-menu")||r.target.closest(".popup-dialog-transparency")||r.target.closest(".feedback-wrap"))&&!r.target.closest(".close")||!r.target.closest(".popup-show")?r.target.closest(".link-list")&&"A"===r.target.tagName?t(r,".popup-repair-types"):r.target.classList.contains("link-privacy")?t(r,".popup-privacy"):r.target.classList.contains("transparency-item__img")?t(r,".popup-transparency"):"BUTTON"===r.target.tagName&&"Проконсультироваться"===r.target.textContent.trim()?t(r,".popup-consultation"):r.target.closest(".portfolio-slider-wrap .portfolio-slider__slide-frame")&&!r.target.closest(".slider-arrow-tablet-mobile")&&t(r,".popup-portfolio"):(r.preventDefault(),e.forEach((e=>{e.classList.remove("popup-show")})))})),e.forEach((e=>{e.style.transition="1s"}))})(),document.querySelectorAll("input[name=phone]").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/\D/g,"").replace(/(7)(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})(.*)/,((e,t,r,l,s,o,i)=>(e="+7 (",r?(e+=r,l?(e+=") "+l,s?(e+="-"+s,o?e+="-"+o:e):e):e):e)))})),e.addEventListener("focus",(()=>{e.value||(e.value="+7 (")})),e.addEventListener("blur",(()=>{"+7 ("===e.value&&(e.value="")}))})),(()=>{const e=document.querySelectorAll(".mobile-hide.tablet-hide .formula-item"),t=document.querySelectorAll(".desktop-hide .formula-item"),r=e=>{const t=e.querySelector(".formula-item-popup");e.classList.toggle("active-item"),e.classList.contains("active-item")?t.getBoundingClientRect().y<0&&t.classList.add("reflect"):t.classList.remove("reflect")};e.forEach((e=>{const t=e.querySelector(".formula-item__icon");t.addEventListener("mouseover",(()=>{r(e)})),t.addEventListener("mouseout",(()=>{r(e)}))})),t.forEach((e=>{e.addEventListener("click",(()=>{r(e)}))}))})(),t({sliderWrapperSelector:".formula-slider-wrap",slidesSelector:".formula-slider__slide"}),(()=>{const e=document.querySelector(".nav-wrap-repair"),r=e.querySelectorAll(".repair-types-nav__item"),l=document.querySelectorAll(".repair-types-slider > div");let s,o,i=1;const n=()=>{l.forEach((e=>{e.style.display="none"})),l[i-1].style.display=""};e.addEventListener("click",(e=>{if(e.target.closest(".repair-types-nav__item")){e.preventDefault();for(let t=0;t<r.length;t++)r[t].classList.remove("active"),e.target.closest(".repair-types-nav__item")===r[t]&&(r[t].classList.add("active"),i=t+1);s.slidesInit(`.types-repair${i} .repair-types-slider__slide`),n()}})),s=t({sliderWrapperSelector:".repair-types-slider-wrap",slidesSelector:".types-repair1 .repair-types-slider__slide",sliderCounterSelector:".slider-counter"}),o=t({sliderWrapperSelector:".repair-types-tab .nav-wrap-repair",slidesSelector:".repair-types-nav__item",slideActiveClass:"repair-slide-active",btnNextSelector:".nav-arrow_right",btnPrevSelector:".nav-arrow_left"}),n(),o.mobile(1024)})(),(()=>{const e=document.querySelectorAll(".transparency-item__img");let r,l;for(let t=0;t<e.length;t++)e[t].addEventListener("click",(()=>{l.renderSlide(t)}));r=t({sliderWrapperSelector:".transparency-slider-wrap",slidesSelector:".transparency-item"}),l=t({sliderWrapperSelector:".popup-transparency-slider-wrap",slidesSelector:".popup-transparency-slider__slide",btnPrevSelector:".popup-arrow_transparency_left",btnNextSelector:".popup-arrow_transparency_right",sliderCounterSelector:".slider-counter-content"}),r.mobile(1024)})(),t({sliderWrapperSelector:".reviews-slider-wrap",slidesSelector:".reviews-slider__slide"}),(()=>{const e=document.querySelector(".faq .accordion"),t=document.querySelectorAll(".faq .title_block");let r;e.addEventListener("click",(e=>{e.target.classList.contains("title_block")&&(e.preventDefault(),e.target.classList.contains("msg-active")||(clearTimeout(r),t.forEach((e=>{e.classList.remove("msg-active")})),r=setTimeout((()=>e.target.classList.add("msg-active")),500)))}))})(),(()=>{const e=document.querySelectorAll("form");let t="Неправильно заполнены поля!";try{if(!e)throw new Error("Формы не найдены");e.forEach((e=>{const r=document.createElement("div");e.addEventListener("submit",(l=>{l.preventDefault(),((e,r)=>{const l=e.querySelectorAll("input"),s=new FormData(e),o={};var i;"feedback3"!==e.id&&"feedback1"!==e.id&&"feedback6"!==e.id?(r.style.color="#fff",r.style.marginBottom="20px"):r.style.color="#000",e.before(r),(e=>{let r=!0;return e.forEach((e=>{switch(!0){case"checkbox"===e.type:e.checked||(r=!1,t="Согласитесь на обработку персональных данных!");break;case"name"===e.name:/[^а-я\s]/gi.test(e.value)&&(r=!1,t="Неправильно заполнено имя!"),e.value.length<2&&(r=!1,t="В имени должно быть минимум 2 символа");break;case"phone"===e.name:11!==e.value.replace(/[\D]/g,"").length&&(r=!1,t="Неправильно заполнен телефон!")}})),r})(l)?(r.innerHTML="Загрузка...",s.forEach(((e,t)=>{o[t]=e})),(i={method:"POST",body:o},fetch("https://jsonplaceholder.typicode.com/posts",{method:i.method,headers:{"Content-Type":"application/json"},body:i.body?JSON.stringify(i.body):""}).then((e=>{if(e.ok)return e.json();throw new Error(`${e.status} ${e.statusText}`)})).catch((e=>{throw e}))).then((e=>{r.textContent="",l.forEach((e=>{e.value="","checkbox"===e.type&&(e.checked=!1)})),document.querySelector(".popup-consultation").classList.remove("popup-show"),document.querySelector(".popup-thank").classList.add("popup-show")})).catch((e=>{r.textContent="Ошибка!"}))):r.textContent=t})(e,r)}))}))}catch(e){console.log(e.message)}})(),(()=>{const r=document.querySelector(".nav-list-popup-repair"),l=document.querySelector(".popup-repair-types-content__head-title"),s=document.querySelector(".popup-repair-types-content-table tbody");let o;const i=t=>{e(`http://localhost:4545/prices?type=${t}`).then((e=>{s.textContent="",e.forEach((e=>{s.insertAdjacentHTML("beforeend",`\n            <tr class="mobile-row showHide">\n            <td class="repair-types-name">\n                ${e.name}\n            </td>\n            <td class="mobile-col-title tablet-hide desktop-hide">\n                Ед.измерения\n            </td>\n            <td class="mobile-col-title tablet-hide desktop-hide">\n                Цена за ед.\n            </td>\n            <td class="repair-types-value">${"м2"===e.units?"м<sup>2</sup>":e.units}</td>\n            <td class="repair-types-value">${e.cost} руб.</td>\n            </tr>\n          `)}))})).catch((e=>console.log(e)))};r.addEventListener("click",(e=>{e.target.classList.contains("popup-repair-types-nav__item")&&(e.preventDefault(),l.textContent=e.target.textContent.trim(),i(e.target.textContent.trim()),document.querySelector(".popup-repair-types-content-table").scrollTop=0)})),e("http://localhost:4545/prices").then((e=>{let t=[];e.forEach((e=>{t.includes(e.type)||t.push(e.type)})),r.textContent="",(e=>{e.forEach((e=>{r.insertAdjacentHTML("beforeend",`\n            <button class="button_o popup-repair-types-nav__item">\n                ${e}\n            </button>\n        `)}))})(t),i(t[0])})).catch((e=>console.log(e.message))).finally((o=t({sliderWrapperSelector:".popup-repair-types .nav-wrap-repair",slidesSelector:".popup-repair-types-nav__item",slideActiveClass:"repair-slide-active-inline",btnNextSelector:".nav-arrow_right",btnPrevSelector:".nav-arrow_left"}),void o.mobile(1024)))})(),(()=>{const e=document.querySelector(".portfolio-slider-wrap");let l,s,o,i,n=3;const c=()=>{l.disable(),0!==n?(s.enable&&s.disable(),l.numOfSlidesChange=n,l.init()):s.init()},a=()=>{document.documentElement.clientWidth>1024&&3!==n?(n=3,c()):document.documentElement.clientWidth<=1024&&document.documentElement.clientWidth>900&&2!==n?(n=2,c()):document.documentElement.clientWidth<=900&&document.documentElement.clientWidth>575&&1!==n?(n=1,c()):document.documentElement.clientWidth<=575&&0!==n&&(n=0,c())};e.addEventListener("click",(e=>{if(e.target.classList.contains("portfolio-slider__slide-frame")){let t=e.target.dataset.slide;o.renderSlide(t),i.renderSlide(t)}})),window.addEventListener("resize",a),l=r({sliderWrapperSelector:".portfolio-slider-wrap",slidesSelector:".portfolio-slider__slide",slideActiveClass:"portfolio-slide-active",btnPrevSelector:".slider-arrow_left-portfolio",btnNextSelector:".slider-arrow_right-portfolio"}),s=t({sliderWrapperSelector:".portfolio-slider-wrap",slidesSelector:".portfolio-slider-mobile .portfolio-slider__slide-frame",slideActiveClass:"portfolio-slide-active",btnPrevSelector:".slider-arrow-tablet-mobile_left",btnNextSelector:".slider-arrow-tablet-mobile_right",sliderCounterSelector:".slider-counter-content"}),o=t({sliderWrapperSelector:".popup-portfolio-slider-wrap",slidesSelector:".popup-portfolio-slider__slide",slideActiveClass:"slider-slide-active-block",sliderCounterSelector:".slider-counter-content",btnNextSelector:".popup-arrow_right",btnPrevSelector:".popup-arrow_left"}),i=t({sliderWrapperSelector:".popup-dialog-portfolio",slidesSelector:".popup-portfolio-text",btnNextSelector:".popup-arrow_right",btnPrevSelector:".popup-arrow_left"}),s.disable(),a()})()})();